<!DOCTYPE html>
<html id="top" lang="en-us">
  <head>
    <meta charset="utf-8">
    <title>The Crosswalk Project</title>
    <link rel="shorcut icon" href="/assets/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon" />
    <script>
      WebFontConfig = {
        custom: {
          families: ['Clear Sans'],
          urls: ['/css/fonts.css']
        },
        google: {
          families: ['Source Code Pro:n4,n6']
        },
        timeout: 2000
      };
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script async defer src="//ajax.googleapis.com/ajax/libs/webfont/1.5.3/webfont.js"></script>
    <link rel="stylesheet" href="/css/main.css">

    <meta name="description" content="Enable the most advanced web innovations with the Crosswalk Project web runtime to develop powerful Android and Cordova apps." />
    <meta name="author" content="Crosswalk" />
    <meta name="handheldfriendly" content="true" />
    <meta name="mobileoptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="cleartype" content="on" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <!-- Facebook -->
    <meta property="og:side_name" content="Crosswalk" />
    <meta property="og:title" content="Cordova plugin support" />
    <meta property="og:url" content="http://crosswalk-project.org/documentation/ios/cordova_plugin_support" />
    <meta property="og:description" content="Enable the most advanced web innovations with the Crosswalk Project web runtime to develop powerful Android and Cordova apps." />
    <meta property="og:image" content="/assets/crosswalk-og-banner.jpg" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:url" content="http://crosswalk-project.org/documentation/ios/cordova_plugin_support" />
    <meta name="twitter:title" content="Cordova plugin support" />
    <meta name="twitter:description" content="Enable the most advanced web innovations with the Crosswalk Project web runtime to develop powerful Android and Cordova apps." />
    <meta name="twitter:site" content="@xwalk_project" />

    <!-- Relevant original Crosswalk Project JS -->
    <script src="/js/utils.js"></script>
    <script src="/js/xwalk.js"></script>
    <script src="/js/versions.js"></script>
    <script src="/js/demos.js"></script>
    <script src="/js/tools.js"></script>

  </head>
  <body>
    <!-- If the current page is an index less than two
         directories deep or in the root directory,
         leave it alone so we can do custom layouts.
         Otherwise, provide the header and nav. -->
    
    <div class="container">
      <div class="doc-header">
        

  

  <div class="doc-logo-div">
     <a href="/" class="doc-logo-link">
       <img src="/assets/identity/crosswalkproject-logo-horizontal-dark.png" class="doc-logo-img">
     </a>
  </div>
  <div class="doc-nav-div">
    <ul class="doc-nav-list">
      <li class="doc-nav-item">
        <a href="/documentation/getting_started.html" class="doc-nav-link">Documentation</a>
      </li>
      <li class="doc-nav-item">
        <a href="/blog" class="doc-nav-link">Blog</a>
      </li>
      <li class="doc-nav-item">
        <a href="/contribute" class="doc-nav-link">Contribute</a>
      </li>
      <li class="doc-nav-item">
        <a href="https://github.com/crosswalk-project/crosswalk-website/wiki" class="doc-nav-link">Wiki</a>
      </li>
      <li class="doc-nav-item hide-on-small">
        <a href="/documentation/about/faq.html" class="doc-nav-link">FAQ</a>
      </li>
      <li class="doc-nav-item hide-on-small">
        <a href="/documentation/getting_started.html" class="doc-nav-link" style="border:1px solid #ec543b;padding:8px;color:#ec543b;" >get started</a>
      </li>
    </ul>
  </div>
  

      </div>
      <br />
      <div class="doc-main">
        <div class="row">
          
          <nav id="contents" class="article-toc nav-toggleContainer">
  <a href="#contents" id="contents-toggle" class="button button--small button--tertiary nav-toggle">Table of Contents</a>
  <a href="./#contents-toggle" class="button button--small button--tertiary nav-toggle--dummy">Table of Contents</a>
  <ul class="article-list nav-toggleHide">
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/about.html">About</a>

         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/getting_started.html">Getting Started</a>

         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/android.html">Android</a>

         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/ios.html">iOS</a>

         


         <ul class="article-list">
            
           <li class="article-item ">
             <a class="article-link" href="/documentation/ios/quick_start_guide.html">Quick Start Guide</a>
               
           </li>
           
           <li class="article-item ">
             <a class="article-link" href="/documentation/ios/embedding_mode_&amp;_native_apis.html">Embedding mode &amp; native APIs</a>
               
           </li>
           
           <li class="article-item ">
             <a class="article-link" href="/documentation/ios/manifest.html">Manifest</a>
               
           </li>
           
           <li class="article-item ">
             <a class="article-link" href="/documentation/ios/extensions.html">Extensions</a>
               
           </li>
           
           <li class="article-item  nav-item--active">
             <a class="article-link" href="/documentation/ios/cordova_plugin_support.html">Cordova plugin support</a>
               
           </li>
           
         </ul>
         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/linux.html">Linux</a>

         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/tizen.html">Tizen</a>

         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/manifest.html">Manifest</a>

         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/apis.html">APIs</a>

         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/cordova.html">Cordova</a>

         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/downloads.html">Downloads</a>

         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/embedding_crosswalk.html">Embedding Crosswalk</a>

         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/shared_mode.html">Shared Mode</a>

         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/webrtc.html">WebRTC</a>

         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/screens.html">Screens</a>

         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/samples.html">Samples</a>

         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/community.html">Community</a>

         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/report_bugs.html">Report bugs</a>

         
       </li>
    
       <li class="article-item ">
         <a class="article-link" href="/documentation/test_suite.html">Test Suite</a>

         
       </li>
    
  </ul>

</nav>



<article class="article article--hasToC">
  <h1>Cordova Plugin Support</h1>
<p>Crosswalk for iOS provides support for Cordova Plugins by introducing the Cordova.framework based on the Crosswalk Extension mechanism. The <code>XWalkCordovaExtension</code> is responsible for managing the life cycle of the Cordova Plugins, replicates the environment that Cordova Plugins run in, and provides the functionalities that Cordova Plugins need based on the Crosswalk Extension framework. You can leverage the existing Cordova Plugins to extend Crosswalk&#39;s functionalities without changing any code of the plugins.</p>
<h2>Cordova Plugin API</h2>
<p>We are going to support all the Cordova Plugin API in the comming future, the status of API availability is:</p>
<h3>Supported</h3>
<ul>
<li><a href="https://github.com/apache/cordova-plugin-battery-status">org.apache.cordova.battery-status</a></li>
<li><a href="https://github.com/apache/cordova-plugin-console">org.apache.cordova.console</a></li>
<li><a href="https://github.com/apache/cordova-plugin-contacts">org.apache.cordova.contacts</a></li>
<li><a href="https://github.com/apache/cordova-plugin-device">org.apache.cordova.device</a></li>
<li><a href="https://github.com/apache/cordova-plugin-device-motion">org.apache.cordova.device-motion</a></li>
<li><a href="https://github.com/apache/cordova-plugin-device-orientation">org.apache.cordova.device-orientation</a></li>
<li><a href="https://github.com/apache/cordova-plugin-dialogs">org.apache.cordova.dialogs</a></li>
<li><a href="https://github.com/apache/cordova-plugin-file">org.apache.cordova.file</a></li>
<li><a href="https://github.com/apache/cordova-plugin-file-transfer">org.apache.cordova.file-transfer</a></li>
<li><a href="https://github.com/apache/cordova-plugin-geolocation">org.apache.cordova.geolocation</a></li>
<li><a href="https://github.com/apache/cordova-plugin-globalization">org.apache.cordova.globalization</a></li>
<li><a href="https://github.com/apache/cordova-plugin-inappbrowser">org.apache.cordova.inappbrowser</a></li>
<li><a href="https://github.com/apache/cordova-plugin-media">org.apache.cordova.media</a></li>
<li><a href="https://github.com/apache/cordova-plugin-media-capture">org.apache.cordova.media-capture</a></li>
<li><a href="https://github.com/apache/cordova-plugin-network-information">org.apache.cordova.network-information</a></li>
<li><a href="https://github.com/apache/cordova-plugin-vibration">org.apache.cordova.vibration</a></li>
<li><a href="https://github.com/apache/cordova-plugin-splashscreen">org.apache.cordova.splashscreen</a></li>
<li><a href="https://github.com/apache/cordova-plugin-statusbar">org.apache.cordova.statusbar</a></li>
</ul>
<h3>Under Development</h3>
<ul>
<li><a href="https://github.com/apache/cordova-plugin-camera">org.apache.cordova.camera</a></li>
</ul>
<p>You are warmly welcome to contribute together with us to enable more Cordova Plugins for Crosswalk.</p>
<h2>Quickstart</h2>
<p>In this section we&#39;d like to show you a simple demo application with <code>org.apache.cordova.device</code> embedded to demonstrate the processes to create an application with Cordova Plugin support.</p>
<h3>Setup The Working Directory</h3>
<ol>
<li><p>Create a working directory called <code>cordova-device-demo</code> in a suitable place:</p>
<pre><code class="language-bash">mkdir cordova-device-demo
cd cordova-device-demo</code></pre>
</li>
<li><p>Clone the <code>crosswalk-ios</code> project with command:</p>
<pre><code class="language-bash">git clone https://github.com/crosswalk-project/crosswalk-ios.git</code></pre>
</li>
<li><p>Initialize the <code>crosswalk-ios</code> submodules with commands:</p>
<pre><code class="language-bash">cd crosswalk-ios
git submodule update --init --recursive
cd -</code></pre>
</li>
</ol>
<h3>Setup DeviceDemo Project</h3>
<h4>Create DeviceDemo Project</h4>
<p>We need to create an application project to host the Cordova plugin and the web resources.</p>
<ol>
<li><p>Create <code>DeviceDemo</code> Project in directory <code>cordova-device-demo</code></p>
<ul>
<li><p>In <code>File</code> -&gt; <code>New</code> -&gt; <code>Project...</code>, create a single view application with Swift language.</p>
</li>
<li><p>For quick demo, you may replace the auto-generated <code>ViewController.swift</code> with <code>crosswalk-ios/AppShell/AppShell/CordovaViewController.swift</code>, which has setup a WKWebView instance for you already.</p>
<ul>
<li>Just remove the auto-generated <code>ViewController.swift</code> file, and add <code>crosswalk-ios/AppShell/AppShell/CordovaViewController.swift</code> into the <code>DeviceDemo</code> project.</li>
</ul>
</li>
</ul>
</li>
<li><p>Embed <code>XWalkView.framework</code> and <code>Cordova.framework</code> into the <code>DeviceDemo</code></p>
<p>To enable the extended XWalkView and Cordova plugin support, we need to link the application with those two libraries and embed Cordova.framework into the application bundle.</p>
<ul>
<li><p>In <code>File</code> -&gt; <code>Add Files to &quot;DeviceDemo&quot;...</code>, choose the <code>XWalkView.xcodeproj</code> from <code>crosswalk-ios/XWalkView/XWalkView.xcodeproj</code>, and <code>Cordova.framework</code> from <code>crosswalk-ios/Cordova/Cordova.xcodeproj</code>;</p>
</li>
<li><p>Select <code>DeviceDemo</code> target in <code>DeviceDemo</code> project, in <code>General</code> -&gt; <code>Linked Frameworks and Libraries</code>, add <code>XWalkView.framework</code>.</p>
</li>
<li><p>Drag <code>Cordova.framework</code> into the <code>General</code> -&gt; <code>Embedded Binaries</code> section in the Project Setting Panel of <code>DeviceDemo</code>, which will be added into the <code>Linked Frameworks and Libraries</code> automatically.</p>
</li>
</ul>
</li>
<li><p>Try to build the <code>DeviceDemo</code> application target, to see if it works fine.</p>
</li>
</ol>
<h4>Import <code>org.apache.cordova.device</code> Plugin Resources</h4>
<p>Next step is to import both native and html5 resources from <a href="https://github.com/apache/cordova-plugin-device">org.apache.cordova.device</a> into the project.</p>
<ol>
<li><p>Clone org.apache.cordova.device</p>
<pre><code class="language-bash">git clone git@github.com:apache/cordova-plugin-device.git</code></pre>
</li>
<li><p>Add native part of the plugin source file in to the application</p>
<ul>
<li><p>Select <code>DeviceDemo</code> project, in <code>File</code> -&gt; <code>Add Files to &quot;DeviceDemo&quot;...</code>,</p>
</li>
<li><p>add <code>CDVDevice.h</code> and <code>CDVDevice.m</code> from <code>../cordova-plugin-device/src/ios</code> into the project.</p>
</li>
</ul>
</li>
<li><p>Add HTML5 part of resources into the application</p>
<pre><code class="language-bash">cd DeviceDemo; mkdir -p www/plugins/org.apache.cordova.device/www/
cd www; cp ../../cordova-plugin-device/www/device.js plugins/org.apache.cordova.device/www
vim plugins/org.apache.cordova.device/www/device.js</code></pre>
<p>As the <code>device.js</code> only provides the content of implementation of the <code>device</code> object, we need to wrap it into a cordova module before importing it into the web app&#39;s context. (We will provide a script to make this step automatic.)</p>
<pre><code class="language-javascript">cordova.define(&quot;org.apache.cordova.device.device&quot;, function(require, exports, module) {
 // The original content of device.js goes here.
 ...
});</code></pre>
</li>
<li><p>Create the configuration needed by Cordova Extension</p>
<p>We also need to add a configuration file to tell Cordova Extension how to load the Cordova Plugin. Here we simulated the way that Cordova project does, in order to provide the same behavior as the Cordova project. in <code>www</code> directory:</p>
<pre><code class="language-bash">touch cordova_plugins.js
vim cordova_plugins.js</code></pre>
<p>With the content:</p>
<pre><code class="language-javascript">cordova.define(&#39;cordova/plugin_list&#39;, function(require, exports, module) {
module.exports = [
   {
       &quot;file&quot;: &quot;plugins/org.apache.cordova.device/www/device.js&quot;,
       &quot;id&quot;: &quot;org.apache.cordova.device.device&quot;,
       &quot;clobbers&quot;: [
           &quot;device&quot;
       ]
   }
];
module.exports.metadata =
// TOP OF METADATA
{
   &quot;org.apache.cordova.device&quot;: &quot;0.2.12&quot;
}
// BOTTOM OF METADATA
});</code></pre>
</li>
</ol>
<h4>Create The Web Apps</h4>
<p>After importing the device plugin, we need to create the web application part to leverage the ability of the device plugin.</p>
<ol>
<li><p>Create <code>index.html</code> in <code>www</code> directory.</p>
<pre><code class="language-bash">touch index.html
vim index.html</code></pre>
<p>With the content:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
   &lt;meta charset=&quot;utf-8&quot;/&gt;
   &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;/&gt;
   &lt;style&gt;
       table, th, td {
           border: 1px solid black;
           border-collapse: collapse;
       }
       th, td {
           padding: 5px;
       }
   &lt;/style&gt;
   &lt;title&gt;Cordova device API plugin demo&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;p&gt;This is the demo page for testing org.cordova.plugin.device.&lt;/p&gt;
   &lt;table id=&#39;table&#39; style=&#39;width:100%&#39;&gt;
       &lt;caption&gt;Device Properties&lt;/caption&gt;
       &lt;thead&gt;
           &lt;tr&gt;
               &lt;th&gt;Name&lt;/th&gt;
               &lt;th&gt;Value&lt;/th&gt;
           &lt;/tr&gt;
       &lt;/thead&gt;
   &lt;/table&gt;
   &lt;script&gt;
       document.addEventListener(&quot;deviceready&quot;, onDeviceReady, false);
       function onDeviceReady() {
           var table = document.getElementById(&#39;table&#39;);
           for (var propName in device) {;
               if (typeof(device[propName]) == &#39;function&#39;) {
                   continue;
               }
               var row = document.createElement(&#39;tr&#39;);
               var name = document.createElement(&#39;td&#39;);
               var value = document.createElement(&#39;td&#39;);
               name.innerHTML = propName;
               value.innerHTML = device[propName];
               row.appendChild(name);
               row.appendChild(value);
               table.appendChild(row);
           }
       }
   &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>In this demo we will listen to the <code>deviceready</code> event and retrieve the system information from the <code>device</code> object, and then add them into a table. The <code>device</code> object is provided by <code>org.apache.cordova.device</code> plugin and the system information is gathered from native side.</p>
</li>
<li><p>Embed the web resources into the project</p>
<p>We need to add the web resources(including plugin and app resources) into the project and package as a native iOS application.</p>
<ul>
<li><p>Select <code>DeviceDemo</code> project, in <code>File</code> -&gt; <code>Add Files to &quot;DeviceDemo&quot;...</code>,</p>
</li>
<li><p>Add <code>www</code> directory into the project, with <code>Create folder references</code> option selected.</p>
</li>
</ul>
</li>
<li><p>Create the <code>manifest.plist</code> for the project</p>
<p>The <code>manifest.plist</code> describes the extension info embedding with the application, as well as the Cordova Plugin info with it.</p>
<ul>
<li><p>Select <code>DeviceDemo</code> project, in <code>File</code> -&gt; <code>New</code> -&gt; <code>File</code>,</p>
</li>
<li><p>Choose <code>iOS</code> -&gt; <code>Resource</code> -&gt; <code>Property List</code>, and enter the name: <code>manifest</code>.</p>
</li>
</ul>
<p>Then add:</p>
<ul>
<li><code>start_url</code> with String type and <code>index.html</code> as value.</li>
<li><code>xwalk_extensions</code> with Array type, and add:<ul>
<li><code>xwalk.cordova</code> as an entry.</li>
</ul>
</li>
<li><code>cordova_plugins</code> with Array type and add an item of Dictionary type within it. In the dictionary type add:<ul>
<li><code>class</code> for key and <code>CDVDevice</code> for value;</li>
<li><code>name</code> for key and <code>Device</code> for value;</li>
</ul>
</li>
</ul>
</li>
<li><p>Build and run the <code>DeviceDemo</code> application target on <code>iOS Device</code> to see if it works fine.</p>
<p>Now the demo should be ready to use. That&#39;s it.</p>
</li>
</ol>
<h2>Demos</h2>
<p>In <a href="https://github.com/crosswalk-project/crosswalk-ios/tree/master/Demos/Cordova">Demos/Cordova</a>, there&#39;re two demos to demonstrate the usage of Cordova plugin support. You may try them out to see how it works.</p>

  <footer class="article-next">
    

  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
      
    
  


  </footer>
</article>

          
        </div>
      </div>
    </div>
    

    <hr class="footer-divider" style="margin-top:125px; margin-bottom:0px" />
    <div style="position:relative; top:-30px;">
       <a href="/"><img src="/assets/cw-logo-circle.png" width="60px" style="display:block; margin: 0 auto;" /></a>
    </div>
    <footer class="footer footer--documentation" >
      <div class="container" >
        <div class="row">
          <div  class="footer-div">
            <img src="/assets/Twitter_logo_blue.png" width="20px" /> Follow  <a href="http://twitter.com/xwalk_project">@xwalk_project on Twitter</a> for the latest developer activities and project updates.
          </div>
          <div class="footer-div">
             Latest blog post:</br>
              
              
                <b><a href="/blog">How to change the Crosswalk version used by the Cordova Crosswalk Webview plugin</a></b><br/>
                &nbsp;(<span ><time class="js-vagueTime" datetime="Mon, 17 Aug 2015 12:00:00 GMT">2015-08-17T12:00</time></span>)
              
              <br/>
           </div>
          <div class="footer-div">
              <strong><a href="/feed.xml"><img src="/assets/rss-icon-16.gif" style="vertical-align:middle" /> RSS Feed</a></strong>
          </div>
          <div class="footer-div">
             <a href="/documentation">Documentation</a> &nbsp;
             <a href="/blog">Blog</a> &nbsp;
             <a href="/documentation/downloads.html">Downloads</a> <br />
             <a href="https://crosswalk-project.org/jira/secure/Dashboard.jspa">Issues</a> &nbsp;
             <a href="https://github.com/crosswalk-project">GitHub source</a> &nbsp;
             <a href="/sitemap.html">Sitemap</a> <br/>
          </div>
        </div>
        <div class="row">
            <small>
              The Crosswalk Project was created by the Intel Open Source Technology Center. Copyright © 2013–2015 Intel Corporation. All rights reserved. <a href="https://github.com/crosswalk-project/crosswalk-website/wiki/Privacy-Policy">Privacy policy</a>. *Other names and brands may be claimed as the property of others.
            </small>
        </div>
      </div>
    </footer>

    
    
      <!-- Google Tag Manager -->
      <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-WC843Q"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-WC843Q');</script>
      <!-- End Google Tag Manager -->
    
    <script src="/js/smoothScroll.js"></script>
    <script src="/js/vagueTime.js"></script>
    <!-- <script async defer src="/js/trmix.js"></script> -->
  </body>
</html>
